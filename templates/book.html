<!DOCTYPE html>
<html>
<head>
    <title>Бронирование</title>
</head>
<body>
    {% if 'username' not in session %}
        <div id="login-register-popup" class="popup">
            <h2>Вход</h2>
            <form action="/login" method="post">
                <label for="username">Имя пользователя:</label><br>
                <input type="text" id="username" name="username" required><br>
                <label for="password">Пароль:</label><br>
                <input type="password" id="password" name="password" required><br>
                <input type="submit" value="Войти">
            </form>

            <h2>Регистрация</h2>
            <form action="/register" method="post">
                <label for="new-username">Новое имя пользователя:</label><br>
                <input type="text" id="new-username" name="new_username" required><br>
                <label for="new-password">Новый пароль:</label><br>
                <input type="password" id="new-password" name="new_password" required><br>
                <input type="submit" value="Зарегистрироваться">
            </form>
        </div>
    {% else %}
        <a href="/">На Главную</a>
        <div id="booking-form">
            <!-- Форма для выбора даты и дома -->
            <form action="/book" method="post">
                <input type="date" id="start-date" name="start_date">
                <input type="date" id="end-date" name="end_date">
                <!-- Дополнительные элементы для выбора дома -->
                <label for="house">Выберите дом:</label>
                <select id="house" name="house_id">
                    <option value="1">Дом 1</option>
                    <option value="2">Дом 2</option>
                    <option value="3">Дом 3</option>
                </select>
                <button type="submit">Забронировать</button>
            </form>
        </div>
        <div id="confirmation-popup" class="popup" style="display: none;">
            <h2>Бронирование подтверждено</h2>
            <p>Информация о вашем бронировании:</p>
            <p><strong>Дата заезда:</strong> 01.01.2025</p>
            <p><strong>Дата выезда:</strong> 07.01.2025</p>
            <p><strong>Выбранный дом:</strong> Дом 1</p>
            <button onclick="closeConfirmation()">Закрыть</button>
        </div>
    {% endif %}

    <script>
        function confirmBooking() {
            // Отправка данных на сервер и получение ответа
            // После успешной отправки показываем попап с подтверждением
            document.getElementById("confirmation-popup").style.display = "block";
        }

        function closeConfirmation() {
            // Закрытие попапа с подтверждением
            document.getElementById("confirmation-popup").style.display = "none";
        }

        // JavaScript для отображения и скрытия попапа для входа и регистрации
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("login-register-popup").style.display = "block"; // Показываем попап при необходимости
        });
    </script>
</body>
</html>
