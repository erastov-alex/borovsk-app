{% extends 'base.html' %}

{% block styles %}
<link href="{{ url_for('static', filename='css/index.css') }}" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cormorant+Infant:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
{% endblock %}

{% block content %}

{% if show_toast %}
<div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
        <img src="{{ url_for('static', filename='img/logo.png') }}" class="rounded me-2" alt="... " height="24">
        <strong class="me-auto">Дополните информацию</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">
        <form>
            <div class="mb-3">
                <label for="phone" class="form-label">Укажите свой номер:</label>
                <input type="text" class="form-control" id="phone" name="phone">
            </div>
            <button type="submit" class="btn btn-success">Отправить</button>
        </form>
    </div>
</div>
{% endif %}

<!-- featured -->
<div class="video-bg">
  <video playsinline loop autoplay="autoplay" muted preload="auto" id="video-bg">
    <source src="static/video/video_main.mp4" type="video/mp4" />
  </video>
  <div class="effects"></div>
  <div class="video-bg__content">
      <h1 class="cormorant-infant-regular">B O R O <span class="cinzel-decorative-regular">V</span> S K Y</h2>
      <p class="roboto-thin mb-4">Загородный комплекс для выходных на природе</p>
      <a href="/house_selection" class="btn btn-success-custom btn-lg" style="background-color: rgba(0, 128, 128, 0.68);">Забронировать</a>
  </div>
  </div>
</div>

<div class="bg-image">
  <div class="position-relative overflow-hidden p-3 p-md-5 text-center bg-light" style="background-image: url('https://s12.gifyu.com/images/Sapca.gif'); background-size: cover; background-position: center;">
      <div class="col-md-5 p-lg-5 mx-auto my-5">
        <h1 class="cormorant-infant-regular">B O R O <span class="cinzel-decorative-regular">V</span> S K Y</h2>
          <p class="roboto-thin mb-4">Загородный комплекс для выходных на природе</p>
          <a href="/house_selection" class="btn btn-success-custom btn-lg" style="background-color: rgba(0, 128, 128, 0.68);">Забронировать</a>
      </div>
      <div class="product-device shadow-sm d-none d-md-block"></div>
      <div class="product-device product-device-2 shadow-sm d-none d-md-block"></div>
  </div>
</div>


<!-- Main -->
<div class="px-4 py-5 my-5 text-center mt-4">
    <img class="logo-animated d-block mx-auto mb-4" src="static/img/logo_square2.png" alt="" width="144" height="144">
    <h1 class="display-5 fw-bold">Уютные домики в Боровске</h1>
    <div class="col-lg-6 mx-auto">
      <p class="lead mb-4">Современные коттеджи 101м² с панорамным остеклением и приватной территорией рядом с историческим городом России</p>
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <button type="button" class="btn btn btn-success-custom btn-lg px-4 me-sm-3">Заказать звонок</button>
        <button type="button" class="btn btn-outline-secondary btn-lg px-4">Подарочный сертификат</button>
      </div>
    </div>
</div>

<!-- Carousel With Indicators -->
<div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
  <!-- Carousel items -->
  <div class="carousel-inner">
    {% for house in houses %}
    <div class="carousel-item {{ 'active' if loop.first else '' }}">
      <div class="row justify-content-center">
        <div class="carousel-left col-md-8">
          <div class="mb-3 text-center">
              <h5 class="display-5 fw-bold text-center">{{ house.name }}</h5>
              <p class="roboto-thin mb-4"></p>
                <strong>Тип:</strong> {{ house.floors }}<br>
                <strong>Вместимость:</strong> {{ house.persons }}<br>
                <strong>Кровати:</strong> {{ house.beds }}<br>
                <strong>Комнаты:</strong> {{ house.rooms }}<br>
                <strong>Удобства:</strong> {{ house.water }}<br>
                <strong>Особенности:</strong> {{ house.bbq }}
              </p>
              <p class="card-text">{{ house.small_disc }}</p>
              <p class="card-text">Цена: {{ house.price }}</p>
              <a href="{{ url_for('main.house_details', house_id=house.id) }}" class="btn btn-success-custom">Выбрать</a>
          </div>
        </div>
        <div class="carousel-right col-md-4">
          <img src="{{ house.main_photo }}" class="d-block w-100" alt="House image">
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Controls -->
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
          data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Назад</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
          data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Далее</span>
  </button>
</div>

<h2 class="reveal-text pb-2 display-6 text-center px-4 py-5" id="animated-header">Достопримечательности - в шаговой доступности</h2>

<div class="container" id="custom-cards">
    <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5">
      <div class="col">
        <div class="card card-cover h-100 overflow-hidden text-white bg-dark rounded-5 shadow-lg" style="background-image: url('https://media.pravoslavie.ru/314850.b.jpg?mtime=1554118721');">
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">
            <h2 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-shadow">Свято-Пафнутьев Боровский монастырь</h2>
            <ul class="d-flex list-unstyled mt-auto">
              <li class="me-auto">
                <img src="static/img/logo_square2.png" alt="logo" width="32" height="32" class="rounded-circle">
              </li>
              <li class="d-flex align-items-center">
                <svg class="bi me-2" width="1em" height="1em"><use xlink:href="#calendar3"/></svg>
                <button class="btn btn btn-outline-light">Подробнее</button>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card card-cover h-100 overflow-hidden text-white bg-dark rounded-5 shadow-lg" style="background-image: url('https://img-fotki.yandex.ru/get/373240/121998322.ec/0_a47dc_f2919d23_orig.jpg');">
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">
            <h2 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-shadow">Фрески Боровска</h2>
            <ul class="d-flex list-unstyled mt-auto">
              <li class="me-auto">
                <img src="static/img/logo_square2.png" alt="logo" width="32" height="32" class="rounded-circle">
              </li>
              <li class="d-flex align-items-center">
                <svg class="bi me-2" width="1em" height="1em"><use xlink:href="#calendar3"/></svg>
                <button class="btn btn btn-outline-light btn-text-shadow">Подробнее</button>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card card-cover h-100 overflow-hidden text-white bg-dark rounded-5 shadow-lg" style="background-image: url('https://i.pinimg.com/736x/1d/e8/dd/1de8dd51e4559aec8602de70997d3add--moscow-russia.jpg');">
          <div class="d-flex flex-column h-100 p-5 pb-3 text-shadow-1">
            <h2 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-shadow">Храм Покрова Пресвятой Богородицы</h2>
            <ul class="d-flex list-unstyled mt-auto">
              <li class="me-auto">
                <img src="static/img/logo_square2.png" alt="logo" width="32" height="32" class="rounded-circle">
              </li>
              <li class="d-flex align-items-center">
                <svg class="bi me-2" width="1em" height="1em"><use xlink:href="#calendar3"/></svg>
                <button class="btn btn btn-outline-light btn-text-shadow">Подробнее</button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

<script type="text/javascript">
	ymaps.ready(init);
	function init(){
		var myMap = new ymaps.Map("map", {
			center: [55.76, 37.64],
			zoom: 7
		});
	}
</script>
<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Afeaf069919655a5f41cc02c09986ab1770ef8976a395a96b0af2962149937464&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"></script>

<!-- Пользовательский джамботрон -->
<div class="p-5 mb-4 bg-light rounded-3">
	<div class="container-fluid py-5">
	  <h1 class="display-5 fw-bold">Остались вопросы?</h1>
	  <p class="col-md-8 fs-4">Воспользуйтесь формой заказа обратного звонка и мы свяжемся и уточним все детали</p>
	  <button class="btn btn-success-custom btn-lg" type="button">Заказать звонок</button>
	</div>
</div>

{% endblock %}
{% block scripts %}
<script>
	document.addEventListener("DOMContentLoaded", function() {
		var toastElList = [].slice.call(document.querySelectorAll('.toast'));
		var toastList = toastElList.map(function (toastEl) {
			return new bootstrap.Toast(toastEl);
		});
		toastList[0].show();
	});	
  document.addEventListener('DOMContentLoaded', function () {
    const selectHouseButtons = document.querySelectorAll('.select-house-btn');

    selectHouseButtons.forEach(button => {
        button.addEventListener('click', function () {
            const houseId = button.getAttribute('data-house-id');
            window.location.href = "/house_details/" + houseId;
        });
    });
  });


  const cards = document.querySelectorAll('.card');
  let animatedCards = [];

  function animateCards() {
    cards.forEach((card, index) => {
      const cardTop = card.offsetTop;
      const scrollPosition = window.scrollY + window.innerHeight;
      if (scrollPosition > cardTop && !animatedCards.includes(index)) {
        card.classList.add('animate');
        animatedCards.push(index);
        setTimeout(() => {
          animateCards(); // call again after 1 second to animate the next card
        }, 1000);
      }
    });
  }

  window.addEventListener('scroll', animateCards);
  animateCards(); // initial animation on page load


</script>
{% endblock %}

