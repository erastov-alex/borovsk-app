<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="static/img/logo_square.png">

  <title>Добавить дом</title>

  <!-- Bootstrap core CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    .container {
      max-width: 960px;
    }

    .border-top { border-top: 1px solid #e5e5e5; }
    .border-bottom { border-bottom: 1px solid #e5e5e5; }
    .border-top-gray { border-top-color: #adb5bd; }

    .box-shadow { box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05); }

    .lh-condensed { line-height: 1.25; }

    .py-5.text-center + .col-md-5 {
      margin-top: -35px; /* Уменьшаем верхний отступ */
    }
  </style>
</head>

<body class="bg-light">

  <div class="col-md-5 order-md-1 d-block mx-auto">
    <form class="needs-validation" method="post" action="{% if edit %}{{ url_for('admin.edit_house', house_id=house.id) }}{% else %}{{ url_for('admin.add_house') }}{% endif %}" novalidate>
      {% if edit %}
        <h2>Редактировать дом</h2>
      {% else %}
        <h2>Добавить дом</h2>
      {% endif %}
  
      <div class="mb-2">
        <label for="name">Название дома</label>
        <input type="text" class="form-control" id="name" name="name" placeholder="Название дома" value="{{ house.name if edit else '' }}" required>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="floors">Количество этажей</label>
        <input type="text" class="form-control" id="floors" name="floors" placeholder="Количество этажей" value="{{ house.floors if edit else '' }}" required>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="persons">Количество персон</label>
        <input type="number" class="form-control" id="persons" name="persons" placeholder="Количество персон" value="{{ house.persons if edit else '' }}" required>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="beds">Количество кроватей</label>
        <input type="number" class="form-control" id="beds" name="beds" placeholder="Количество кроватей" value="{{ house.floors if edit else '' }}" required>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="rooms">Количество комнат</label>
        <input type="number" class="form-control" id="rooms" name="rooms" placeholder="Количество комнат" value="{{ house.rooms if edit else '' }}" required>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="bbq" name="bbq" value="{{ house.bbq if edit else '' }}">
          <label class="form-check-label" for="bbq">Наличие барбекю</label>
        </div>
      </div>

      <div class="mb-2">
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="water" name="water" value="{{ house.water if edit else '' }}">
          <label class="form-check-label" for="water">Наличие воды</label>
        </div>
      </div>
      

      <div class="mb-2">
        <label for="main_photo">Главная фотография (путь до файла)</label>
        <input type="text" class="form-control" id="main_photo" name="main_photo" placeholder="Путь до главной фотографии" value="{{ house.main_photo if edit else '' }}" required>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="photos_dir">Директория с фотографиями</label>
        <input type="text" class="form-control" id="photos_dir" name="photos_dir" placeholder="Директория с фотографиями" value="{{ house.photos_dir if edit else '' }}" required>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="small_disc">Короткое описание</label>
        <textarea class="form-control" id="small_disc" name="small_disc" rows="3" placeholder="Короткое описание" required>{{ house.small_disc if edit else '' }}</textarea>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="big_disc">Подробное описание</label>
        <textarea class="form-control" id="big_disc" name="big_disc" rows="5" placeholder="Подробное описание" required>{{ house.big_disc if edit else '' }}</textarea>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>

      <div class="mb-2">
        <label for="price">Цена</label>
        <textarea class="form-control" id="price" name="price" rows="5" placeholder="Цена" required>{{ house.price if edit else '' }}</textarea>
        <div class="invalid-feedback">
          Обязательное поле!
        </div>
      </div>
      {% if edit %}
        <button class="btn btn-outline-danger btn-lg mt-2 mx-2" type="submit" formaction="{{ url_for('admin.del_house', house_id=house.id) }}" formmethod="post">Удалить дом</button>
      {% endif %}
      <button class="btn btn-outline-success btn-lg mt-2 d-block mx-auto" type="submit">Сохранить</button>
    </form>
  </div>
</div>

<footer class="my-5 pt-5 text-muted text-center text-small">
  <p class="mb-1">&copy; 2024 Borovsky</p>
  <ul class="list-inline">
    <li class="list-inline-item"><a href="#">Правила</a></li>
    <li class="list-inline-item"><a href="#">Политика</a></li>
    <li class="list-inline-item"><a href="#">Поддержка</a></li>
  </ul>
</footer>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (function() {
    'use strict';

    window.addEventListener('load', function() {
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.getElementsByClassName('needs-validation');

      // Loop over them and prevent submission
      var validation = Array.prototype.filter.call(forms, function(form) {
        form.addEventListener('submit', function(event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();
</script>
</body>
</html>
